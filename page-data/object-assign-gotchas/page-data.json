{"componentChunkName":"component---src-templates-post-jsx","path":"/object-assign-gotchas","result":{"data":{"markdownRemark":{"html":"<p>Object.assign() is a common way to create a new object and to copy all the properties. As per <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\">MDN</a> this method copies all enumerable own properties from one or more source objects to a target object.</p>\n<p>One of the most common use cases, is to create a new object from an existing object like below:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// expected output: Object { a: 5, b: 10 }</span></code></pre></div>\n<p>While it looks to be perfect, this creates a shallow copy for objects with nested properties. Any updates or changes to the target object also update the source. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> obj1<span class=\"token punctuation\">,</span> c<span class=\"token operator\">:</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> obj2<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// output: Object { obj1: { a: 5, b: 10 }, c: 15 }</span>\n\ntarget<span class=\"token punctuation\">.</span>obj1<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token number\">42</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// expected output: Object { a: 5, b: 10 }</span>\n<span class=\"token comment\">// output: Object { a: 42, b: 10 }</span></code></pre></div>\n<p>One way to avoid the previous gotcha is simply performing a deep copy. <a href=\"https://lodash.com/docs/4.17.15\">lodash</a> library has a <a href=\"https://lodash.com/docs/4.17.15#cloneDeep\">cloneDeep()</a> method which is perfect for the previous scenario. The above example rewritten using lodash is as below:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> obj1<span class=\"token punctuation\">,</span> c<span class=\"token operator\">:</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">cloneDeep</span><span class=\"token punctuation\">(</span>obj2<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// output: Object { obj1: { a: 5, b: 10 }, c: 15 }</span>\n\ntarget<span class=\"token punctuation\">.</span>obj1<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token number\">42</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// output: Object { a: 5, b: 10 }</span></code></pre></div>\n<p>Don't forget to checkout Lodash docs for more handy methods for cloning. </p>","frontmatter":{"date":"21st April, 2020","title":"Object.assign() gotchas","tags":["javascript","lodash","gotchas"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgT/2gAMAwEAAhADEAAAAeXstUyGf//EABkQAAMAAwAAAAAAAAAAAAAAAAABEhEhMf/aAAgBAQABBQKdQNYKZTOn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARITH/2gAIAQEAAT8hG6vEixgDNuUqtb//2gAMAwEAAgADAAAAEBsP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFBYf/aAAgBAQABPxDjDcWLNJr2dmSmMIoi9y8Ns//Z","aspectRatio":1.3675213675213675,"src":"/static/2489737fc42b86bac4dc5b16c09c2b80/f6227/reflection.jpg","srcSet":"/static/2489737fc42b86bac4dc5b16c09c2b80/6b948/reflection.jpg 480w,\n/static/2489737fc42b86bac4dc5b16c09c2b80/d1e22/reflection.jpg 960w,\n/static/2489737fc42b86bac4dc5b16c09c2b80/f6227/reflection.jpg 1920w,\n/static/2489737fc42b86bac4dc5b16c09c2b80/d6966/reflection.jpg 1968w","srcWebp":"/static/2489737fc42b86bac4dc5b16c09c2b80/dc7e7/reflection.webp","srcSetWebp":"/static/2489737fc42b86bac4dc5b16c09c2b80/83f4f/reflection.webp 480w,\n/static/2489737fc42b86bac4dc5b16c09c2b80/ce114/reflection.webp 960w,\n/static/2489737fc42b86bac4dc5b16c09c2b80/dc7e7/reflection.webp 1920w,\n/static/2489737fc42b86bac4dc5b16c09c2b80/a1e4c/reflection.webp 1968w","sizes":"(max-width: 1920px) 100vw, 1920px"},"resize":{"src":"/static/2489737fc42b86bac4dc5b16c09c2b80/a6c62/reflection.jpg"}}}}}},"pageContext":{"pathSlug":"/object-assign-gotchas","prev":{"frontmatter":{"path":"/working-from-home-in-the-covid-19-times","title":"Working from home in the COVID-19 times","tags":["rants","working from home","covid","covid-19","productivity tips"]}},"next":null}},"staticQueryHashes":["1830426702"]}